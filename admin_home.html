<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>EMS Admin Panel</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f9fcff; margin: 0; padding: 0; }
    .tab { display: inline-block; margin-right: 10px; padding: 10px 20px; background: #e6ecf1; border-radius: 4px 4px 0 0; cursor: pointer; }
    .tab.active { background: #008cba; color: #fff; }
    button { margin: 5px 4px 10px 0; padding: 6px 16px; border: none; border-radius: 4px; background: #008cba; color: #fff; cursor: pointer; font-size: 1em; }
    button:hover { background: #005f7a; }
    .response { background: #fff; border: 1px solid #dde4ea; border-radius: 6px; margin: 18px 0; padding: 12px 20px; box-shadow: 0 2px 6px #c3d6e5; }
    .response.missing { border-left: 5px solid #d14545; }
    .field { margin-bottom: 7px; }
    .field > div[contenteditable] { background: #f5f8fa; padding: 2px 5px; border-radius: 3px; min-height: 20px; border: 1px solid #dde4ea; }
    audio { width: 95%; margin: 4px 0; }
    #logBox { font-size: 0.95em; margin: 10px 0 18px 0; padding: 10px; background: #eaf6fa; border-radius: 6px; color: #095577; }
    #responsesContainer { max-width: 880px; margin: 0 auto; }
    @media (max-width: 900px) { #responsesContainer { padding: 8px; } }
  </style>
</head>
<body>
  <div style="background:#eaf6fa;padding:16px 0 10px 0;border-bottom:1px solid #c3d6e5;">
    <span class="tab active" id="approvedTab" onclick="loadApproved()">Approved</span>
    <span class="tab" id="reviewTab" onclick="loadReview()">Review</span>
    <button onclick="updateAllResponses()">ğŸ§  Update Database</button>
    <button onclick="autoTagAllApprovedResponses()">â™»ï¸ Auto-Tag All Approved</button>
    <button onclick="massUpdateSkillSheetIDs()">ğŸ”„ Mass Update SkillSheet IDs</button>
    <button onclick="autoAssignSkillSheetIDWithGPT()">ğŸ¤– Auto-Assign SkillSheet ID (GPT)</button>
    <button onclick="exportFirebaseToJSON()">â¬‡ï¸ Export JSON Files</button>
  </div>
  <!-- New JSON file edit UI -->
  <div style="margin:10px 0;">
    <input type="file" id="jsonFileInput" accept=".json" style="display:none;">
    <button onclick="document.getElementById('jsonFileInput').click();">ğŸ“ Edit JSON File</button>
    <button id="downloadEditedJsonBtn" style="display:none;" onclick="downloadEditedJson()">ğŸ’¾ Download Edited JSON</button>
  </div>
  <div id="jsonEditContainer" style="max-width:900px;margin:0 auto 20px auto;"></div>
  <div id="logBox">Admin panel loaded.</div>
  <div id="responsesContainer"></div>
  <script type="module" src="admin_home.js"></script>
</body>
</html>
